{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { createStyleSheet } from '../../dom.js';\nimport { DomEmitter, stopEvent } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { mixin } from '../../../common/objects.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nclass TraitRenderer {\n  constructor(trait) {\n    this.trait = trait;\n    this.renderedElements = [];\n  }\n  get templateId() {\n    return `template:${this.trait.name}`;\n  }\n  renderTemplate(container) {\n    return container;\n  }\n  renderElement(element, index, templateData) {\n    const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n    if (renderedElementIndex >= 0) {\n      const rendered = this.renderedElements[renderedElementIndex];\n      this.trait.unrender(templateData);\n      rendered.index = index;\n    } else {\n      const rendered = {\n        index,\n        templateData\n      };\n      this.renderedElements.push(rendered);\n    }\n    this.trait.renderIndex(index, templateData);\n  }\n  splice(start, deleteCount, insertCount) {\n    const rendered = [];\n    for (const renderedElement of this.renderedElements) {\n      if (renderedElement.index < start) {\n        rendered.push(renderedElement);\n      } else if (renderedElement.index >= start + deleteCount) {\n        rendered.push({\n          index: renderedElement.index + insertCount - deleteCount,\n          templateData: renderedElement.templateData\n        });\n      }\n    }\n    this.renderedElements = rendered;\n  }\n  renderIndexes(indexes) {\n    for (const {\n      index,\n      templateData\n    } of this.renderedElements) {\n      if (indexes.indexOf(index) > -1) {\n        this.trait.renderIndex(index, templateData);\n      }\n    }\n  }\n  disposeTemplate(templateData) {\n    const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n    if (index < 0) {\n      return;\n    }\n    this.renderedElements.splice(index, 1);\n  }\n}\nclass Trait {\n  constructor(_trait) {\n    this._trait = _trait;\n    this.length = 0;\n    this.indexes = [];\n    this.sortedIndexes = [];\n    this._onChange = new Emitter();\n    this.onChange = this._onChange.event;\n  }\n  get name() {\n    return this._trait;\n  }\n  get renderer() {\n    return new TraitRenderer(this);\n  }\n  splice(start, deleteCount, elements) {\n    var _a;\n    deleteCount = Math.max(0, Math.min(deleteCount, this.length - start));\n    const diff = elements.length - deleteCount;\n    const end = start + deleteCount;\n    const sortedIndexes = [...this.sortedIndexes.filter(i => i < start), ...elements.map((hasTrait, i) => hasTrait ? i + start : -1).filter(i => i !== -1), ...this.sortedIndexes.filter(i => i >= end).map(i => i + diff)];\n    const length = this.length + diff;\n    if (this.sortedIndexes.length > 0 && sortedIndexes.length === 0 && length > 0) {\n      const first = (_a = this.sortedIndexes.find(index => index >= start)) !== null && _a !== void 0 ? _a : length - 1;\n      sortedIndexes.push(Math.min(first, length - 1));\n    }\n    this.renderer.splice(start, deleteCount, elements.length);\n    this._set(sortedIndexes, sortedIndexes);\n    this.length = length;\n  }\n  renderIndex(index, container) {\n    container.classList.toggle(this._trait, this.contains(index));\n  }\n  unrender(container) {\n    container.classList.remove(this._trait);\n  }\n  /**\n   * Sets the indexes which should have this trait.\n   *\n   * @param indexes Indexes which should have this trait.\n   * @return The old indexes which had this trait.\n   */\n  set(indexes, browserEvent) {\n    return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n  }\n  _set(indexes, sortedIndexes, browserEvent) {\n    const result = this.indexes;\n    const sortedResult = this.sortedIndexes;\n    this.indexes = indexes;\n    this.sortedIndexes = sortedIndexes;\n    const toRender = disjunction(sortedResult, indexes);\n    this.renderer.renderIndexes(toRender);\n    this._onChange.fire({\n      indexes,\n      browserEvent\n    });\n    return result;\n  }\n  get() {\n    return this.indexes;\n  }\n  contains(index) {\n    return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n  }\n  dispose() {\n    dispose(this._onChange);\n  }\n}\n__decorate([memoize], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n  constructor(setAriaSelected) {\n    super('selected');\n    this.setAriaSelected = setAriaSelected;\n  }\n  renderIndex(index, container) {\n    super.renderIndex(index, container);\n    if (this.setAriaSelected) {\n      if (this.contains(index)) {\n        container.setAttribute('aria-selected', 'true');\n      } else {\n        container.setAttribute('aria-selected', 'false');\n      }\n    }\n  }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n  constructor(trait, view, identityProvider) {\n    this.trait = trait;\n    this.view = view;\n    this.identityProvider = identityProvider;\n  }\n  splice(start, deleteCount, elements) {\n    if (!this.identityProvider) {\n      return this.trait.splice(start, deleteCount, elements.map(() => false));\n    }\n    const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n    const elementsWithTrait = elements.map(e => pastElementsWithTrait.indexOf(this.identityProvider.getId(e).toString()) > -1);\n    this.trait.splice(start, deleteCount, elementsWithTrait);\n  }\n}\nexport function isInputElement(e) {\n  return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n  if (e.classList.contains('monaco-editor')) {\n    return true;\n  }\n  if (e.classList.contains('monaco-list')) {\n    return false;\n  }\n  if (!e.parentElement) {\n    return false;\n  }\n  return isMonacoEditor(e.parentElement);\n}\nexport function isButton(e) {\n  if (e.tagName === 'A' && e.classList.contains('monaco-button') || e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown')) {\n    return true;\n  }\n  if (e.classList.contains('monaco-list')) {\n    return false;\n  }\n  if (!e.parentElement) {\n    return false;\n  }\n  return isButton(e.parentElement);\n}\nclass KeyboardController {\n  constructor(list, view, options) {\n    this.list = list;\n    this.view = view;\n    this.disposables = new DisposableStore();\n    this.multipleSelectionDisposables = new DisposableStore();\n    this.onKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(this.onEnter, this, this.disposables);\n    this.onKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(this.onUpArrow, this, this.disposables);\n    this.onKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(this.onDownArrow, this, this.disposables);\n    this.onKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUpArrow, this, this.disposables);\n    this.onKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDownArrow, this, this.disposables);\n    this.onKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(this.onEscape, this, this.disposables);\n    if (options.multipleSelectionSupport !== false) {\n      this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n    }\n  }\n  get onKeyDown() {\n    return this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event).filter(e => !isInputElement(e.target)).map(e => new StandardKeyboardEvent(e)));\n  }\n  updateOptions(optionsUpdate) {\n    if (optionsUpdate.multipleSelectionSupport !== undefined) {\n      this.multipleSelectionDisposables.clear();\n      if (optionsUpdate.multipleSelectionSupport) {\n        this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n      }\n    }\n  }\n  onEnter(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.setSelection(this.list.getFocus(), e.browserEvent);\n  }\n  onUpArrow(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusPrevious(1, false, e.browserEvent);\n    const el = this.list.getFocus()[0];\n    this.list.setAnchor(el);\n    this.list.reveal(el);\n    this.view.domNode.focus();\n  }\n  onDownArrow(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusNext(1, false, e.browserEvent);\n    const el = this.list.getFocus()[0];\n    this.list.setAnchor(el);\n    this.list.reveal(el);\n    this.view.domNode.focus();\n  }\n  onPageUpArrow(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusPreviousPage(e.browserEvent);\n    const el = this.list.getFocus()[0];\n    this.list.setAnchor(el);\n    this.list.reveal(el);\n    this.view.domNode.focus();\n  }\n  onPageDownArrow(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.focusNextPage(e.browserEvent);\n    const el = this.list.getFocus()[0];\n    this.list.setAnchor(el);\n    this.list.reveal(el);\n    this.view.domNode.focus();\n  }\n  onCtrlA(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.list.setSelection(range(this.list.length), e.browserEvent);\n    this.list.setAnchor(undefined);\n    this.view.domNode.focus();\n  }\n  onEscape(e) {\n    if (this.list.getSelection().length) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.list.setSelection([], e.browserEvent);\n      this.list.setAnchor(undefined);\n      this.view.domNode.focus();\n    }\n  }\n  dispose() {\n    this.disposables.dispose();\n    this.multipleSelectionDisposables.dispose();\n  }\n}\n__decorate([memoize], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n  TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n  TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n  TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n  TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n  mightProducePrintableCharacter(event) {\n    if (event.ctrlKey || event.metaKey || event.altKey) {\n      return false;\n    }\n    return event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */ || event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */ || event.keyCode >= 93 /* KeyCode.Numpad0 */ && event.keyCode <= 102 /* KeyCode.Numpad9 */ || event.keyCode >= 80 /* KeyCode.Semicolon */ && event.keyCode <= 90 /* KeyCode.Quote */;\n  }\n}();\n\nclass TypeNavigationController {\n  constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n    this.list = list;\n    this.view = view;\n    this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n    this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n    this.delegate = delegate;\n    this.enabled = false;\n    this.state = TypeNavigationControllerState.Idle;\n    this.mode = TypeNavigationMode.Automatic;\n    this.triggered = false;\n    this.previouslyFocused = -1;\n    this.enabledDisposables = new DisposableStore();\n    this.disposables = new DisposableStore();\n    this.updateOptions(list.options);\n  }\n  updateOptions(options) {\n    var _a, _b;\n    if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n    this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n  }\n  enable() {\n    if (this.enabled) {\n      return;\n    }\n    let typing = false;\n    const onChar = this.enabledDisposables.add(Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event)).filter(e => !isInputElement(e.target)).filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered).map(event => new StandardKeyboardEvent(event)).filter(e => typing || this.keyboardNavigationEventFilter(e)).filter(e => this.delegate.mightProducePrintableCharacter(e)).forEach(stopEvent).map(event => event.browserEvent.key).event;\n    const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, this.enabledDisposables);\n    const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : (r || '') + i, undefined, this.enabledDisposables);\n    onInput(this.onInput, this, this.enabledDisposables);\n    onClear(this.onClear, this, this.enabledDisposables);\n    onChar(() => typing = true, undefined, this.enabledDisposables);\n    onClear(() => typing = false, undefined, this.enabledDisposables);\n    this.enabled = true;\n    this.triggered = false;\n  }\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabledDisposables.clear();\n    this.enabled = false;\n    this.triggered = false;\n  }\n  onClear() {\n    var _a;\n    const focus = this.list.getFocus();\n    if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n      // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n      // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n      const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n      if (ariaLabel) {\n        alert(ariaLabel);\n      }\n    }\n    this.previouslyFocused = -1;\n  }\n  onInput(word) {\n    if (!word) {\n      this.state = TypeNavigationControllerState.Idle;\n      this.triggered = false;\n      return;\n    }\n    const focus = this.list.getFocus();\n    const start = focus.length > 0 ? focus[0] : 0;\n    const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n    this.state = TypeNavigationControllerState.Typing;\n    for (let i = 0; i < this.list.length; i++) {\n      const index = (start + i + delta) % this.list.length;\n      const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n      const labelStr = label && label.toString();\n      if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n        this.previouslyFocused = start;\n        this.list.setFocus([index]);\n        this.list.reveal(index);\n        return;\n      }\n    }\n  }\n  dispose() {\n    this.disable();\n    this.enabledDisposables.dispose();\n    this.disposables.dispose();\n  }\n}\nclass DOMFocusController {\n  constructor(list, view) {\n    this.list = list;\n    this.view = view;\n    this.disposables = new DisposableStore();\n    const onKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event)).filter(e => !isInputElement(e.target)).map(e => new StandardKeyboardEvent(e));\n    onKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey).on(this.onTab, this, this.disposables);\n  }\n  onTab(e) {\n    if (e.target !== this.view.domNode) {\n      return;\n    }\n    const focus = this.list.getFocus();\n    if (focus.length === 0) {\n      return;\n    }\n    const focusedDomElement = this.view.domElement(focus[0]);\n    if (!focusedDomElement) {\n      return;\n    }\n    const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n    if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n      return;\n    }\n    const style = window.getComputedStyle(tabIndexElement);\n    if (style.visibility === 'hidden' || style.display === 'none') {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    tabIndexElement.focus();\n  }\n  dispose() {\n    this.disposables.dispose();\n  }\n}\nexport function isSelectionSingleChangeEvent(event) {\n  return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n  return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n  return event instanceof MouseEvent && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n  isSelectionSingleChangeEvent,\n  isSelectionRangeChangeEvent\n};\nexport class MouseController {\n  constructor(list) {\n    this.list = list;\n    this.disposables = new DisposableStore();\n    this._onPointer = new Emitter();\n    this.onPointer = this._onPointer.event;\n    if (list.options.multipleSelectionSupport !== false) {\n      this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n    }\n    this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n    if (this.mouseSupport) {\n      list.onMouseDown(this.onMouseDown, this, this.disposables);\n      list.onContextMenu(this.onContextMenu, this, this.disposables);\n      list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n      list.onTouchStart(this.onMouseDown, this, this.disposables);\n      this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n    }\n    Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n  }\n  updateOptions(optionsUpdate) {\n    if (optionsUpdate.multipleSelectionSupport !== undefined) {\n      this.multipleSelectionController = undefined;\n      if (optionsUpdate.multipleSelectionSupport) {\n        this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n      }\n    }\n  }\n  isSelectionSingleChangeEvent(event) {\n    if (!this.multipleSelectionController) {\n      return false;\n    }\n    return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n  }\n  isSelectionRangeChangeEvent(event) {\n    if (!this.multipleSelectionController) {\n      return false;\n    }\n    return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n  }\n  isSelectionChangeEvent(event) {\n    return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n  }\n  onMouseDown(e) {\n    if (isMonacoEditor(e.browserEvent.target)) {\n      return;\n    }\n    if (document.activeElement !== e.browserEvent.target) {\n      this.list.domFocus();\n    }\n  }\n  onContextMenu(e) {\n    if (isMonacoEditor(e.browserEvent.target)) {\n      return;\n    }\n    const focus = typeof e.index === 'undefined' ? [] : [e.index];\n    this.list.setFocus(focus, e.browserEvent);\n  }\n  onViewPointer(e) {\n    if (!this.mouseSupport) {\n      return;\n    }\n    if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n      return;\n    }\n    const focus = e.index;\n    if (typeof focus === 'undefined') {\n      this.list.setFocus([], e.browserEvent);\n      this.list.setSelection([], e.browserEvent);\n      this.list.setAnchor(undefined);\n      return;\n    }\n    if (this.isSelectionRangeChangeEvent(e)) {\n      return this.changeSelection(e);\n    }\n    if (this.isSelectionChangeEvent(e)) {\n      return this.changeSelection(e);\n    }\n    this.list.setFocus([focus], e.browserEvent);\n    this.list.setAnchor(focus);\n    if (!isMouseRightClick(e.browserEvent)) {\n      this.list.setSelection([focus], e.browserEvent);\n    }\n    this._onPointer.fire(e);\n  }\n  onDoubleClick(e) {\n    if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n      return;\n    }\n    if (this.isSelectionChangeEvent(e)) {\n      return;\n    }\n    const focus = this.list.getFocus();\n    this.list.setSelection(focus, e.browserEvent);\n  }\n  changeSelection(e) {\n    const focus = e.index;\n    let anchor = this.list.getAnchor();\n    if (this.isSelectionRangeChangeEvent(e)) {\n      if (typeof anchor === 'undefined') {\n        const currentFocus = this.list.getFocus()[0];\n        anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n        this.list.setAnchor(anchor);\n      }\n      const min = Math.min(anchor, focus);\n      const max = Math.max(anchor, focus);\n      const rangeSelection = range(min, max + 1);\n      const selection = this.list.getSelection();\n      const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n      if (contiguousRange.length === 0) {\n        return;\n      }\n      const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n      this.list.setSelection(newSelection, e.browserEvent);\n      this.list.setFocus([focus], e.browserEvent);\n    } else if (this.isSelectionSingleChangeEvent(e)) {\n      const selection = this.list.getSelection();\n      const newSelection = selection.filter(i => i !== focus);\n      this.list.setFocus([focus]);\n      this.list.setAnchor(focus);\n      if (selection.length === newSelection.length) {\n        this.list.setSelection([...newSelection, focus], e.browserEvent);\n      } else {\n        this.list.setSelection(newSelection, e.browserEvent);\n      }\n    }\n  }\n  dispose() {\n    this.disposables.dispose();\n  }\n}\nexport class DefaultStyleController {\n  constructor(styleElement, selectorSuffix) {\n    this.styleElement = styleElement;\n    this.selectorSuffix = selectorSuffix;\n  }\n  style(styles) {\n    const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n    const content = [];\n    if (styles.listBackground) {\n      if (styles.listBackground.isOpaque()) {\n        content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n      } else if (!platform.isMacintosh) {\n        // subpixel AA doesn't exist in macOS\n        console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`);\n      }\n    }\n    if (styles.listFocusBackground) {\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n    }\n\n    if (styles.listFocusForeground) {\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n    }\n    if (styles.listActiveSelectionBackground) {\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n    }\n\n    if (styles.listActiveSelectionForeground) {\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n    }\n    if (styles.listActiveSelectionIconForeground) {\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n    }\n    if (styles.listFocusAndSelectionOutline) {\n      content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { outline-color: ${styles.listFocusAndSelectionOutline} !important; }`);\n    }\n    if (styles.listFocusAndSelectionBackground) {\n      content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n    }\n    if (styles.listFocusAndSelectionForeground) {\n      content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n    }\n    if (styles.listInactiveFocusForeground) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n      content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n    }\n\n    if (styles.listInactiveSelectionIconForeground) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n    }\n    if (styles.listInactiveFocusBackground) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n      content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n    }\n\n    if (styles.listInactiveSelectionBackground) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n      content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n    }\n\n    if (styles.listInactiveSelectionForeground) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n    }\n    if (styles.listHoverBackground) {\n      content.push(`.monaco-list${suffix}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n    }\n    if (styles.listHoverForeground) {\n      content.push(`.monaco-list${suffix} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n    }\n    if (styles.listSelectionOutline) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n    }\n    if (styles.listFocusOutline) {\n      content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n    }\n    if (styles.listInactiveFocusOutline) {\n      content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n    }\n    if (styles.listHoverOutline) {\n      content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n    }\n    if (styles.listDropBackground) {\n      content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n    }\n    if (styles.tableColumnsBorder) {\n      content.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t}`);\n    }\n    if (styles.tableOddRowsBackgroundColor) {\n      content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n    }\n    this.styleElement.textContent = content.join('\\n');\n  }\n}\nconst defaultStyles = {\n  listFocusBackground: Color.fromHex('#7FB0D0'),\n  listActiveSelectionBackground: Color.fromHex('#0E639C'),\n  listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n  listActiveSelectionIconForeground: Color.fromHex('#FFFFFF'),\n  listFocusAndSelectionOutline: Color.fromHex('#90C2F9'),\n  listFocusAndSelectionBackground: Color.fromHex('#094771'),\n  listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n  listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n  listInactiveSelectionIconForeground: Color.fromHex('#FFFFFF'),\n  listHoverBackground: Color.fromHex('#2A2D2E'),\n  listDropBackground: Color.fromHex('#383B3D'),\n  treeIndentGuidesStroke: Color.fromHex('#a9a9a9'),\n  tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2),\n  tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04)\n};\nconst DefaultOptions = {\n  keyboardSupport: true,\n  mouseSupport: true,\n  multipleSelectionSupport: true,\n  dnd: {\n    getDragURI() {\n      return null;\n    },\n    onDragStart() {},\n    onDragOver() {\n      return false;\n    },\n    drop() {}\n  }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n  const index = range.indexOf(value);\n  if (index === -1) {\n    return [];\n  }\n  const result = [];\n  let i = index - 1;\n  while (i >= 0 && range[i] === value - (index - i)) {\n    result.push(range[i--]);\n  }\n  result.reverse();\n  i = index;\n  while (i < range.length && range[i] === value + (i - index)) {\n    result.push(range[i++]);\n  }\n  return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n  const result = [];\n  let i = 0,\n    j = 0;\n  while (i < one.length || j < other.length) {\n    if (i >= one.length) {\n      result.push(other[j++]);\n    } else if (j >= other.length) {\n      result.push(one[i++]);\n    } else if (one[i] === other[j]) {\n      result.push(one[i]);\n      i++;\n      j++;\n      continue;\n    } else if (one[i] < other[j]) {\n      result.push(one[i++]);\n    } else {\n      result.push(other[j++]);\n    }\n  }\n  return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n  const result = [];\n  let i = 0,\n    j = 0;\n  while (i < one.length || j < other.length) {\n    if (i >= one.length) {\n      result.push(other[j++]);\n    } else if (j >= other.length) {\n      result.push(one[i++]);\n    } else if (one[i] === other[j]) {\n      i++;\n      j++;\n      continue;\n    } else if (one[i] < other[j]) {\n      result.push(one[i++]);\n    } else {\n      j++;\n    }\n  }\n  return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n  constructor(_templateId, renderers) {\n    this._templateId = _templateId;\n    this.renderers = renderers;\n  }\n  get templateId() {\n    return this._templateId;\n  }\n  renderTemplate(container) {\n    return this.renderers.map(r => r.renderTemplate(container));\n  }\n  renderElement(element, index, templateData, height) {\n    let i = 0;\n    for (const renderer of this.renderers) {\n      renderer.renderElement(element, index, templateData[i++], height);\n    }\n  }\n  disposeElement(element, index, templateData, height) {\n    var _a;\n    let i = 0;\n    for (const renderer of this.renderers) {\n      (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n      i += 1;\n    }\n  }\n  disposeTemplate(templateData) {\n    let i = 0;\n    for (const renderer of this.renderers) {\n      renderer.disposeTemplate(templateData[i++]);\n    }\n  }\n}\nclass AccessibiltyRenderer {\n  constructor(accessibilityProvider) {\n    this.accessibilityProvider = accessibilityProvider;\n    this.templateId = 'a18n';\n  }\n  renderTemplate(container) {\n    return container;\n  }\n  renderElement(element, index, container) {\n    const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n    if (ariaLabel) {\n      container.setAttribute('aria-label', ariaLabel);\n    } else {\n      container.removeAttribute('aria-label');\n    }\n    const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n    if (typeof ariaLevel === 'number') {\n      container.setAttribute('aria-level', `${ariaLevel}`);\n    } else {\n      container.removeAttribute('aria-level');\n    }\n  }\n  disposeTemplate(templateData) {\n    // noop\n  }\n}\nclass ListViewDragAndDrop {\n  constructor(list, dnd) {\n    this.list = list;\n    this.dnd = dnd;\n  }\n  getDragElements(element) {\n    const selection = this.list.getSelectedElements();\n    const elements = selection.indexOf(element) > -1 ? selection : [element];\n    return elements;\n  }\n  getDragURI(element) {\n    return this.dnd.getDragURI(element);\n  }\n  getDragLabel(elements, originalEvent) {\n    if (this.dnd.getDragLabel) {\n      return this.dnd.getDragLabel(elements, originalEvent);\n    }\n    return undefined;\n  }\n  onDragStart(data, originalEvent) {\n    var _a, _b;\n    (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n  }\n  onDragOver(data, targetElement, targetIndex, originalEvent) {\n    return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n  }\n  onDragLeave(data, targetElement, targetIndex, originalEvent) {\n    var _a, _b;\n    (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n  }\n  onDragEnd(originalEvent) {\n    var _a, _b;\n    (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n  }\n  drop(data, targetElement, targetIndex, originalEvent) {\n    this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n  }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n  constructor(user, container, virtualDelegate, renderers) {\n    let _options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : DefaultOptions;\n    var _a, _b, _c, _d;\n    this.user = user;\n    this._options = _options;\n    this.focus = new Trait('focused');\n    this.anchor = new Trait('anchor');\n    this.eventBufferer = new EventBufferer();\n    this._ariaLabel = '';\n    this.disposables = new DisposableStore();\n    this._onDidDispose = new Emitter();\n    this.onDidDispose = this._onDidDispose.event;\n    const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n    this.selection = new SelectionTrait(role !== 'listbox');\n    mixin(_options, defaultStyles, false);\n    const baseRenderers = [this.focus.renderer, this.selection.renderer];\n    this.accessibilityProvider = _options.accessibilityProvider;\n    if (this.accessibilityProvider) {\n      baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n      (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n    }\n    renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n    const viewOptions = Object.assign(Object.assign({}, _options), {\n      dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd)\n    });\n    this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\n    this.view.domNode.setAttribute('role', role);\n    if (_options.styleController) {\n      this.styleController = _options.styleController(this.view.domId);\n    } else {\n      const styleElement = createStyleSheet(this.view.domNode);\n      this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n    }\n    this.spliceable = new CombinedSpliceable([new TraitSpliceable(this.focus, this.view, _options.identityProvider), new TraitSpliceable(this.selection, this.view, _options.identityProvider), new TraitSpliceable(this.anchor, this.view, _options.identityProvider), this.view]);\n    this.disposables.add(this.focus);\n    this.disposables.add(this.selection);\n    this.disposables.add(this.anchor);\n    this.disposables.add(this.view);\n    this.disposables.add(this._onDidDispose);\n    this.disposables.add(new DOMFocusController(this, this.view));\n    if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n      this.keyboardController = new KeyboardController(this, this.view, _options);\n      this.disposables.add(this.keyboardController);\n    }\n    if (_options.keyboardNavigationLabelProvider) {\n      const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n      this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : () => true, delegate);\n      this.disposables.add(this.typeNavigationController);\n    }\n    this.mouseController = this.createMouseController(_options);\n    this.disposables.add(this.mouseController);\n    this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n    this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n    if (this.accessibilityProvider) {\n      this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    if (this._options.multipleSelectionSupport !== false) {\n      this.view.domNode.setAttribute('aria-multiselectable', 'true');\n    }\n  }\n  get onDidChangeFocus() {\n    return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n  }\n  get onDidChangeSelection() {\n    return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n  }\n  get domId() {\n    return this.view.domId;\n  }\n  get onMouseClick() {\n    return this.view.onMouseClick;\n  }\n  get onMouseDblClick() {\n    return this.view.onMouseDblClick;\n  }\n  get onMouseMiddleClick() {\n    return this.view.onMouseMiddleClick;\n  }\n  get onPointer() {\n    return this.mouseController.onPointer;\n  }\n  get onMouseDown() {\n    return this.view.onMouseDown;\n  }\n  get onMouseOver() {\n    return this.view.onMouseOver;\n  }\n  get onTouchStart() {\n    return this.view.onTouchStart;\n  }\n  get onTap() {\n    return this.view.onTap;\n  }\n  /**\n   * Possible context menu trigger events:\n   * - ContextMenu key\n   * - Shift F10\n   * - Ctrl Option Shift M (macOS with VoiceOver)\n   * - Mouse right click\n   */\n  get onContextMenu() {\n    let didJustPressContextMenuKey = false;\n    const fromKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event)).map(e => new StandardKeyboardEvent(e)).filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */).map(stopEvent).filter(() => false).event;\n    const fromKeyUp = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event)).forEach(() => didJustPressContextMenuKey = false).map(e => new StandardKeyboardEvent(e)).filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */).map(stopEvent).map(_ref => {\n      let {\n        browserEvent\n      } = _ref;\n      const focus = this.getFocus();\n      const index = focus.length ? focus[0] : undefined;\n      const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n      const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n      return {\n        index,\n        element,\n        anchor,\n        browserEvent\n      };\n    }).event;\n    const fromMouse = this.disposables.add(Event.chain(this.view.onContextMenu)).filter(_ => !didJustPressContextMenuKey).map(_ref2 => {\n      let {\n        element,\n        index,\n        browserEvent\n      } = _ref2;\n      return {\n        element,\n        index,\n        anchor: {\n          x: browserEvent.pageX + 1,\n          y: browserEvent.pageY\n        },\n        browserEvent\n      };\n    }).event;\n    return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n  }\n  get onKeyDown() {\n    return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event;\n  }\n  get onDidFocus() {\n    return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event);\n  }\n  createMouseController(options) {\n    return new MouseController(this);\n  }\n  updateOptions() {\n    let optionsUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _a, _b;\n    this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n    (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n    if (this._options.multipleSelectionController !== undefined) {\n      if (this._options.multipleSelectionSupport) {\n        this.view.domNode.setAttribute('aria-multiselectable', 'true');\n      } else {\n        this.view.domNode.removeAttribute('aria-multiselectable');\n      }\n    }\n    this.mouseController.updateOptions(optionsUpdate);\n    (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n    this.view.updateOptions(optionsUpdate);\n  }\n  get options() {\n    return this._options;\n  }\n  splice(start, deleteCount) {\n    let elements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    if (start < 0 || start > this.view.length) {\n      throw new ListError(this.user, `Invalid start index: ${start}`);\n    }\n    if (deleteCount < 0) {\n      throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n    }\n    if (deleteCount === 0 && elements.length === 0) {\n      return;\n    }\n    this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n  }\n  rerender() {\n    this.view.rerender();\n  }\n  element(index) {\n    return this.view.element(index);\n  }\n  get length() {\n    return this.view.length;\n  }\n  get contentHeight() {\n    return this.view.contentHeight;\n  }\n  get scrollTop() {\n    return this.view.getScrollTop();\n  }\n  set scrollTop(scrollTop) {\n    this.view.setScrollTop(scrollTop);\n  }\n  get ariaLabel() {\n    return this._ariaLabel;\n  }\n  set ariaLabel(value) {\n    this._ariaLabel = value;\n    this.view.domNode.setAttribute('aria-label', value);\n  }\n  domFocus() {\n    this.view.domNode.focus({\n      preventScroll: true\n    });\n  }\n  layout(height, width) {\n    this.view.layout(height, width);\n  }\n  setSelection(indexes, browserEvent) {\n    for (const index of indexes) {\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, `Invalid index ${index}`);\n      }\n    }\n    this.selection.set(indexes, browserEvent);\n  }\n  getSelection() {\n    return this.selection.get();\n  }\n  getSelectedElements() {\n    return this.getSelection().map(i => this.view.element(i));\n  }\n  setAnchor(index) {\n    if (typeof index === 'undefined') {\n      this.anchor.set([]);\n      return;\n    }\n    if (index < 0 || index >= this.length) {\n      throw new ListError(this.user, `Invalid index ${index}`);\n    }\n    this.anchor.set([index]);\n  }\n  getAnchor() {\n    return firstOrDefault(this.anchor.get(), undefined);\n  }\n  getAnchorElement() {\n    const anchor = this.getAnchor();\n    return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n  }\n  setFocus(indexes, browserEvent) {\n    for (const index of indexes) {\n      if (index < 0 || index >= this.length) {\n        throw new ListError(this.user, `Invalid index ${index}`);\n      }\n    }\n    this.focus.set(indexes, browserEvent);\n  }\n  focusNext() {\n    let n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let browserEvent = arguments.length > 2 ? arguments[2] : undefined;\n    let filter = arguments.length > 3 ? arguments[3] : undefined;\n    if (this.length === 0) {\n      return;\n    }\n    const focus = this.focus.get();\n    const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  }\n  focusPrevious() {\n    let n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let browserEvent = arguments.length > 2 ? arguments[2] : undefined;\n    let filter = arguments.length > 3 ? arguments[3] : undefined;\n    if (this.length === 0) {\n      return;\n    }\n    const focus = this.focus.get();\n    const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  }\n  focusNextPage(browserEvent, filter) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n      lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n      const currentlyFocusedElementIndex = this.getFocus()[0];\n      if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n        const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n        if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n          this.setFocus([lastGoodPageIndex], browserEvent);\n        } else {\n          this.setFocus([lastPageIndex], browserEvent);\n        }\n      } else {\n        const previousScrollTop = this.view.getScrollTop();\n        let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n        if (lastPageIndex > currentlyFocusedElementIndex) {\n          // scroll last page element to the top only if the last page element is below the focused element\n          nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n        }\n        this.view.setScrollTop(nextpageScrollTop);\n        if (this.view.getScrollTop() !== previousScrollTop) {\n          this.setFocus([]);\n          // Let the scroll event listener run\n          yield timeout(0);\n          yield this.focusNextPage(browserEvent, filter);\n        }\n      }\n    });\n  }\n  focusPreviousPage(browserEvent, filter) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let firstPageIndex;\n      const scrollTop = this.view.getScrollTop();\n      if (scrollTop === 0) {\n        firstPageIndex = this.view.indexAt(scrollTop);\n      } else {\n        firstPageIndex = this.view.indexAfter(scrollTop - 1);\n      }\n      const currentlyFocusedElementIndex = this.getFocus()[0];\n      if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n        const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n        if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n          this.setFocus([firstGoodPageIndex], browserEvent);\n        } else {\n          this.setFocus([firstPageIndex], browserEvent);\n        }\n      } else {\n        const previousScrollTop = scrollTop;\n        this.view.setScrollTop(scrollTop - this.view.renderHeight);\n        if (this.view.getScrollTop() !== previousScrollTop) {\n          this.setFocus([]);\n          // Let the scroll event listener run\n          yield timeout(0);\n          yield this.focusPreviousPage(browserEvent, filter);\n        }\n      }\n    });\n  }\n  focusLast(browserEvent, filter) {\n    if (this.length === 0) {\n      return;\n    }\n    const index = this.findPreviousIndex(this.length - 1, false, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  }\n  focusFirst(browserEvent, filter) {\n    this.focusNth(0, browserEvent, filter);\n  }\n  focusNth(n, browserEvent, filter) {\n    if (this.length === 0) {\n      return;\n    }\n    const index = this.findNextIndex(n, false, filter);\n    if (index > -1) {\n      this.setFocus([index], browserEvent);\n    }\n  }\n  findNextIndex(index) {\n    let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let filter = arguments.length > 2 ? arguments[2] : undefined;\n    for (let i = 0; i < this.length; i++) {\n      if (index >= this.length && !loop) {\n        return -1;\n      }\n      index = index % this.length;\n      if (!filter || filter(this.element(index))) {\n        return index;\n      }\n      index++;\n    }\n    return -1;\n  }\n  findPreviousIndex(index) {\n    let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let filter = arguments.length > 2 ? arguments[2] : undefined;\n    for (let i = 0; i < this.length; i++) {\n      if (index < 0 && !loop) {\n        return -1;\n      }\n      index = (this.length + index % this.length) % this.length;\n      if (!filter || filter(this.element(index))) {\n        return index;\n      }\n      index--;\n    }\n    return -1;\n  }\n  getFocus() {\n    return this.focus.get();\n  }\n  getFocusedElements() {\n    return this.getFocus().map(i => this.view.element(i));\n  }\n  reveal(index, relativeTop) {\n    if (index < 0 || index >= this.length) {\n      throw new ListError(this.user, `Invalid index ${index}`);\n    }\n    const scrollTop = this.view.getScrollTop();\n    const elementTop = this.view.elementTop(index);\n    const elementHeight = this.view.elementHeight(index);\n    if (isNumber(relativeTop)) {\n      // y = mx + b\n      const m = elementHeight - this.view.renderHeight;\n      this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n    } else {\n      const viewItemBottom = elementTop + elementHeight;\n      const scrollBottom = scrollTop + this.view.renderHeight;\n      if (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n        // The element is already overflowing the viewport, no-op\n      } else if (elementTop < scrollTop || viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight) {\n        this.view.setScrollTop(elementTop);\n      } else if (viewItemBottom >= scrollBottom) {\n        this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n      }\n    }\n  }\n  getHTMLElement() {\n    return this.view.domNode;\n  }\n  getElementID(index) {\n    return this.view.getElementDomId(index);\n  }\n  style(styles) {\n    this.styleController.style(styles);\n  }\n  toListEvent(_ref3) {\n    let {\n      indexes,\n      browserEvent\n    } = _ref3;\n    return {\n      indexes,\n      elements: indexes.map(i => this.view.element(i)),\n      browserEvent\n    };\n  }\n  _onFocusChange() {\n    const focus = this.focus.get();\n    this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n    this.onDidChangeActiveDescendant();\n  }\n  onDidChangeActiveDescendant() {\n    var _a;\n    const focus = this.focus.get();\n    if (focus.length > 0) {\n      let id;\n      if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n        id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n      }\n      this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n    } else {\n      this.view.domNode.removeAttribute('aria-activedescendant');\n    }\n  }\n  _onSelectionChange() {\n    const selection = this.selection.get();\n    this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n    this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n    this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n  }\n  dispose() {\n    this._onDidDispose.fire();\n    this.disposables.dispose();\n    this._onDidDispose.dispose();\n  }\n}\n__decorate([memoize], List.prototype, \"onDidChangeFocus\", null);\n__decorate([memoize], List.prototype, \"onDidChangeSelection\", null);\n__decorate([memoize], List.prototype, \"onContextMenu\", null);\n__decorate([memoize], List.prototype, \"onKeyDown\", null);\n__decorate([memoize], List.prototype, \"onDidFocus\", null);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","createStyleSheet","DomEmitter","stopEvent","StandardKeyboardEvent","Gesture","alert","CombinedSpliceable","binarySearch","firstOrDefault","range","timeout","Color","memoize","Emitter","Event","EventBufferer","matchesPrefix","DisposableStore","dispose","clamp","mixin","platform","isNumber","ListError","ListView","TraitRenderer","constructor","trait","renderedElements","templateId","name","renderTemplate","container","renderElement","element","index","templateData","renderedElementIndex","findIndex","el","rendered","unrender","push","renderIndex","splice","start","deleteCount","insertCount","renderedElement","renderIndexes","indexes","indexOf","disposeTemplate","Trait","_trait","sortedIndexes","_onChange","onChange","event","renderer","elements","_a","Math","max","min","diff","end","filter","map","hasTrait","first","find","_set","classList","toggle","contains","remove","set","browserEvent","sort","numericSort","sortedResult","toRender","disjunction","fire","get","prototype","SelectionTrait","setAriaSelected","setAttribute","TraitSpliceable","view","identityProvider","pastElementsWithTrait","getId","toString","elementsWithTrait","isInputElement","tagName","isMonacoEditor","parentElement","isButton","KeyboardController","list","options","disposables","multipleSelectionDisposables","onKeyDown","keyCode","on","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","multipleSelectionSupport","isMacintosh","metaKey","ctrlKey","onCtrlA","add","chain","domNode","updateOptions","optionsUpdate","undefined","clear","preventDefault","stopPropagation","setSelection","getFocus","focusPrevious","setAnchor","reveal","focus","focusNext","focusPreviousPage","focusNextPage","getSelection","TypeNavigationMode","TypeNavigationControllerState","DefaultKeyboardNavigationDelegate","mightProducePrintableCharacter","altKey","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","delegate","enabled","state","Idle","mode","Automatic","triggered","previouslyFocused","enabledDisposables","_b","typeNavigationEnabled","enable","disable","typeNavigationMode","typing","onChar","forEach","onClear","debounce","onInput","reduce","any","ariaLabel","accessibilityProvider","getAriaLabel","word","delta","Typing","label","getKeyboardNavigationLabel","labelStr","setFocus","DOMFocusController","shiftKey","onTab","focusedDomElement","domElement","tabIndexElement","querySelector","HTMLElement","tabIndex","style","window","getComputedStyle","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","isMouseRightClick","MouseEvent","button","DefaultMultipleSelectionController","MouseController","_onPointer","onPointer","multipleSelectionController","mouseSupport","onMouseDown","onContextMenu","onMouseDblClick","onDoubleClick","onTouchStart","addTarget","getHTMLElement","onMouseClick","onMouseMiddleClick","onTap","onViewPointer","isSelectionChangeEvent","document","activeElement","domFocus","changeSelection","anchor","getAnchor","currentFocus","rangeSelection","selection","contiguousRange","getContiguousRangeContaining","newSelection","relativeComplement","DefaultStyleController","styleElement","selectorSuffix","styles","suffix","content","listBackground","isOpaque","console","warn","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listActiveSelectionIconForeground","listFocusAndSelectionOutline","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusForeground","listInactiveSelectionIconForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listSelectionOutline","listFocusOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","tableColumnsBorder","tableOddRowsBackgroundColor","textContent","join","defaultStyles","fromHex","treeIndentGuidesStroke","transparent","DefaultOptions","keyboardSupport","dnd","getDragURI","onDragStart","onDragOver","drop","reverse","one","other","j","a","b","PipelineRenderer","_templateId","renderers","height","disposeElement","call","AccessibiltyRenderer","removeAttribute","ariaLevel","getAriaLevel","ListViewDragAndDrop","getDragElements","getSelectedElements","getDragLabel","originalEvent","data","targetElement","targetIndex","onDragLeave","onDragEnd","List","user","virtualDelegate","_options","_c","_d","eventBufferer","_ariaLabel","_onDidDispose","onDidDispose","role","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","assign","styleController","domId","spliceable","keyboardController","keyboardNavigationDelegate","typeNavigationController","mouseController","createMouseController","onDidChangeFocus","_onFocusChange","onDidChangeSelection","_onSelectionChange","getWidgetAriaLabel","wrapEvent","toListEvent","onMouseOver","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","_","x","pageX","y","pageY","onDidFocus","signal","bufferEvents","rerender","contentHeight","scrollTop","getScrollTop","setScrollTop","preventScroll","layout","width","getAnchorElement","n","loop","findNextIndex","findPreviousIndex","lastPageIndex","indexAt","renderHeight","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","elementHeight","firstPageIndex","indexAfter","firstGoodPageIndex","focusLast","focusFirst","focusNth","getFocusedElements","relativeTop","elementTop","m","viewItemBottom","scrollBottom","getElementID","getElementDomId","id","getActiveDescendantId"],"sources":["/home/deathblade287/Desktop/AI-MODELS-TESTING/react-app/node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createStyleSheet } from '../../dom.js';\nimport { DomEmitter, stopEvent } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { mixin } from '../../../common/objects.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    constructor(_trait) {\n        this._trait = _trait;\n        this.length = 0;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    splice(start, deleteCount, elements) {\n        var _a;\n        deleteCount = Math.max(0, Math.min(deleteCount, this.length - start));\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [\n            ...this.sortedIndexes.filter(i => i < start),\n            ...elements.map((hasTrait, i) => hasTrait ? i + start : -1).filter(i => i !== -1),\n            ...this.sortedIndexes.filter(i => i >= end).map(i => i + diff)\n        ];\n        const length = this.length + diff;\n        if (this.sortedIndexes.length > 0 && sortedIndexes.length === 0 && length > 0) {\n            const first = (_a = this.sortedIndexes.find(index => index >= start)) !== null && _a !== void 0 ? _a : length - 1;\n            sortedIndexes.push(Math.min(first, length - 1));\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n        this.length = length;\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, elements.map(() => false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        const elementsWithTrait = elements.map(e => pastElementsWithTrait.indexOf(this.identityProvider.getId(e).toString()) > -1);\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n    if (e.classList.contains('monaco-editor')) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isMonacoEditor(e.parentElement);\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.onKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(this.onEnter, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(this.onUpArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(this.onDownArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUpArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDownArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(this.onEscape, this, this.disposables);\n        if (options.multipleSelectionSupport !== false) {\n            this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n        }\n    }\n    get onKeyDown() {\n        return this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event)\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionDisposables.clear();\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n            }\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 93 /* KeyCode.Numpad0 */ && event.keyCode <= 102 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 80 /* KeyCode.Semicolon */ && event.keyCode <= 90 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        var _a, _b;\n        if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = this.enabledDisposables.add(Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event))\n            .filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(stopEvent)\n            .map(event => event.browserEvent.key)\n            .event;\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        var _a;\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n            if (ariaLabel) {\n                alert(ariaLabel);\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event))\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e));\n        onKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey)\n            .on(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = window.getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return event instanceof MouseEvent && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (document.activeElement !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionRangeChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            if (styles.listBackground.isOpaque()) {\n                content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n            }\n            else if (!platform.isMacintosh) { // subpixel AA doesn't exist in macOS\n                console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`);\n            }\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { outline-color: ${styles.listFocusAndSelectionOutline} !important; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        if (styles.listSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listFocusOutline) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t}`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nconst defaultStyles = {\n    listFocusBackground: Color.fromHex('#7FB0D0'),\n    listActiveSelectionBackground: Color.fromHex('#0E639C'),\n    listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n    listActiveSelectionIconForeground: Color.fromHex('#FFFFFF'),\n    listFocusAndSelectionOutline: Color.fromHex('#90C2F9'),\n    listFocusAndSelectionBackground: Color.fromHex('#094771'),\n    listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n    listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n    listInactiveSelectionIconForeground: Color.fromHex('#FFFFFF'),\n    listHoverBackground: Color.fromHex('#2A2D2E'),\n    listDropBackground: Color.fromHex('#383B3D'),\n    treeIndentGuidesStroke: Color.fromHex('#a9a9a9'),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04)\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        var _a;\n        let i = 0;\n        for (const renderer of this.renderers) {\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, container) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        if (ariaLabel) {\n            container.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            container.removeAttribute('aria-label');\n        }\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            container.removeAttribute('aria-level');\n        }\n    }\n    disposeTemplate(templateData) {\n        // noop\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    drop(data, targetElement, targetIndex, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        var _a, _b, _c, _d;\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        mixin(_options, defaultStyles, false);\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = Object.assign(Object.assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\n        this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event))\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(stopEvent)\n            .filter(() => false)\n            .event;\n        const fromKeyUp = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event))\n            .forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(stopEvent)\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        })\n            .event;\n        const fromMouse = this.disposables.add(Event.chain(this.view.onContextMenu))\n            .filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: { x: browserEvent.pageX + 1, y: browserEvent.pageY }, browserEvent }))\n            .event;\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a, _b;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusNextPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n            lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n                const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n                if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                    this.setFocus([lastGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([lastPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = this.view.getScrollTop();\n                let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n                if (lastPageIndex > currentlyFocusedElementIndex) {\n                    // scroll last page element to the top only if the last page element is below the focused element\n                    nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n                }\n                this.view.setScrollTop(nextpageScrollTop);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusNextPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusPreviousPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let firstPageIndex;\n            const scrollTop = this.view.getScrollTop();\n            if (scrollTop === 0) {\n                firstPageIndex = this.view.indexAt(scrollTop);\n            }\n            else {\n                firstPageIndex = this.view.indexAfter(scrollTop - 1);\n            }\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n                const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n                if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                    this.setFocus([firstGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([firstPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = scrollTop;\n                this.view.setScrollTop(scrollTop - this.view.renderHeight);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusPreviousPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        var _a;\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}